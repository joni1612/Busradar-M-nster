(this["webpackJsonpreact-api"]=this["webpackJsonpreact-api"]||[]).push([[0],{43:function(t,e,i){},53:function(t,e,i){"use strict";i.r(e);var s=i(6),n=i(0),r=i.n(n),o=i(13),a=i.n(o),l=(i(43),i(8)),c=i(9),u=i(20),p=i(12),d=i(11),h=i(59),f=i(61),b=i(57),j=i(58),m=i(7),g=i.n(m),v=i.p+"static/media/Haltestelle.8574cb15.svg",O=i.p+"static/media/bus.04069814.svg",B=new g.a.Icon({iconUrl:v,iconRetinaUrl:v,iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]}),y=new g.a.Icon({iconUrl:O,iconRetinaUrl:O,iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]}),S=i(60),x=function(t){Object(p.a)(i,t);var e=Object(d.a)(i);function i(){return Object(l.a)(this,i),e.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){return this.loadComponent()}},{key:"loadComponent",value:function(){var t=this;return this.props.itemsBus.map((function(e){if(!(t.props.filter.length>0)||t.props.filter.includes(e.properties.linienid))return Object(s.jsxs)("div",{children:[Object(s.jsx)(b.a,{icon:y,position:[e.geometry.coordinates[1],e.geometry.coordinates[0]],opacity:"1",size:"30px",children:Object(s.jsxs)(j.a,{children:["Linie: ",e.properties.linienid," ",Object(s.jsx)("br",{})," Richtung:"," ",e.properties.richtungstext]})}),Object(s.jsx)(b.a,{icon:g.a.divIcon({className:"my-div-icon",html:e.properties.linienid.toString(),iconAnchor:[2,0]}),position:[e.geometry.coordinates[1],e.geometry.coordinates[0]],children:Object(s.jsxs)(j.a,{children:["Linie: ",e.properties.linienid," ",Object(s.jsx)("br",{})," Richtung:"," ",e.properties.richtungstext]})})]},Object(S.a)())}))}}]),i}(n.Component),L=i(32),k=i.n(L),A=i(36),C=i(27),z=[{name:"Linienid",selector:"linienid",sortable:!0},{name:"Richtungstext",selector:"richtungstext",sortable:!0},{name:"Starthaltestelle",selector:"Starthaltestelle",sortable:!0},{name:"Zielhaltestelle",selector:"Zielhaltestelle",sortable:!0},{name:"Aktuelle Haltestelle",selector:"Aktuellhaltestelle",sortable:!0},{name:"Versp\xe4tung",selector:"delay",sortable:!0}],I=function(t){Object(p.a)(i,t);var e=Object(d.a)(i);function i(t){var s;return Object(l.a)(this,i),(s=e.call(this,t)).state={items:s.props.items,filter:[]},s}return Object(c.a)(i,[{key:"render",value:function(){var t,e=this;return Object(s.jsxs)("div",{className:"Filter",children:[Object(s.jsx)(A.a,{id:"dropdown-item-button",title:"Busfilter",children:Object(s.jsx)(C.a,{children:this.props.AllLines.map((function(t){return Object(s.jsx)("div",{className:"mb-3",children:Object(s.jsx)(C.a.Check,{type:"checkbox",id:"".concat(t.id),label:"Linie ".concat(null===t||void 0===t?void 0:t.linienid),checked:!!e.props.filter.includes(null===t||void 0===t?void 0:t.linienid),onChange:function(i){e.handleFilter(t.linienid)}})},"".concat(t.id))}))})}),Object(s.jsx)(k.a,{title:"Busse",columns:z,data:(null===(t=this.props.filter)||void 0===t?void 0:t.length)>=0?this.props.filteredBusses:this.props.AllBusses,pagination:!0,highlightOnHover:!0})]})}},{key:"handleFilter",value:function(t){this.props.filterBusses(t)}}]),i}(n.Component),F=(n.Component,function(t){Object(p.a)(i,t);var e=Object(d.a)(i);function i(){return Object(l.a)(this,i),e.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){return Object(s.jsxs)("div",{children:[Object(s.jsxs)(h.a,{center:[51.961563,7.628202],zoom:16,scrollWheelZoom:!0,children:[Object(s.jsx)(f.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(s.jsx)(x,{itemsBus:this.props.itemsBus,filter:this.props.filter})]}),Object(s.jsx)(I,{busStops:this.props.busStops,AllLines:this.props.AllLines,filter:this.props.filter,filterBusses:this.props.filterBusses,AllBusses:this.props.AllBusses,items:this.props.items,isLoaded:this.props.isLoaded,filteredBusses:this.props.filteredBusses})]})}}]),i}(n.Component)),D=(i(52),function(){function t(){Object(l.a)(this,t)}return Object(c.a)(t,[{key:"getBusStops",value:function(t){var e={};return null===t||void 0===t||t.forEach((function(t){e[t.properties.nr]=t.properties.lbez})),e}},{key:"getBusLines",value:function(t,e){var i,s=[],n=[];return null===t||void 0===t||t.forEach((function(t){n.includes(t.properties.linienid)||(i=e.includes(t.properties.linienid)?{linienid:t.properties.linienid,id:Object(S.a)(),checked:!0}:{linienid:t.properties.linienid,id:Object(S.a)()},s.push(i),n.push(t.properties.linienid))})),s.sort((function(t,e){return t.linienid-e.linienid})),s}},{key:"getBusInformation",value:function(t,e,i){var s,n=[];return e.length>0?(null===t||void 0===t||t.forEach((function(t){e.forEach((function(e){e===t.properties.linienid&&((s=t.properties).longitude=t.geometry.coordinates[0],s.latitude=t.geometry.coordinates[1],s.id=Object(S.a)(),s.Starthaltestelle=i[t.properties.starthst],s.Zielhaltestelle=i[t.properties.zielhst],n.push(s))}))})),n.sort((function(t,e){return t.linienid-e.linienid})),n):(null===t||void 0===t||t.map((function(t){(s=t.properties).longitude=t.geometry.coordinates[0],s.latitude=t.geometry.coordinates[1],s.id=Object(S.a)(),s.Starthaltestelle=i[t.properties.starthst],s.Zielhaltestelle=i[t.properties.zielhst],s.Aktuellhaltestelle=i[t.properties.akthst],n.push(s)})),n.sort((function(t,e){return t.linienid-e.linienid})),n)}}]),t}()),w=function(t){Object(p.a)(i,t);var e=Object(d.a)(i);function i(t){var s;return Object(l.a)(this,i),(s=e.call(this,t)).interval=0,s.datahandling=new D,s.state={items:[],isLoaded:!1,currentCount:0,filteredBusses:[],AllBusses:[],filter:[],AllLines:[],itemsBus:[],itmesStop:[],isLoadedBus:!1,isLoadedStops:!1,zoom:16,currensposition:[],positionLoaded:!1},s.filterBusses=s.filterBusses.bind(Object(u.a)(s)),s.getData=s.getData.bind(Object(u.a)(s)),s}return Object(c.a)(i,[{key:"timer",value:function(){this.setState({currentCount:this.state.currentCount+1}),this.state.currentCount>=10&&(this.getData(),this.setState({currentCount:0}))}},{key:"filterBusses",value:function(t){var e=this.state.filter.slice(),i=e.indexOf(t);i>-1?e.splice(i,1):e.push(t),this.setState({filter:e},this.updateFilteredBusses)}},{key:"updateFilteredBusses",value:function(){this.setState({filteredBusses:this.datahandling.getBusInformation(this.state.items,this.state.filter,this.state.busStops)})}},{key:"componentDidMount",value:function(){this.getHaltestellen(),setInterval(this.timer.bind(this),1e3)}},{key:"getHaltestellen",value:function(){var t=this;fetch("https://rest.busradar.conterra.de/prod/haltestellen").then((function(t){return t.json()})).then((function(e){t.setState({busStops:t.datahandling.getBusStops(e.features),itemsStop:e.features})})).then((function(){return t.getData()})),"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){return t.setState({currensposition:[e.coords.latitude,e.coords.longitude],positionLoaded:!0})})):console.log("Not Available")}},{key:"getData",value:function(){var t=this;fetch("https://rest.busradar.conterra.de/prod/fahrzeuge").then((function(t){return t.json()})).then((function(e){t.setState({items:e.features,AllLines:t.datahandling.getBusLines(e.features,t.state.filter),AllBusses:t.datahandling.getBusInformation(e.features,[],t.state.busStops),filteredBusses:t.datahandling.getBusInformation(e.features,t.state.filter,t.state.busStops),isLoaded:!0,itemsBus:e.features})}))}},{key:"render",value:function(){return this.state.isLoaded?Object(s.jsx)("div",{children:Object(s.jsx)(F,{itemsStop:this.state.itemsStop,itemsBus:this.state.itemsBus,zoom:this.state.zoom,currentPosition:this.state.currensposition,positionLoaded:this.state.positionLoaded,busStops:this.state.busStops,AllLines:this.state.AllLines,filter:this.state.filter,filterBusses:this.filterBusses,AllBusses:this.state.AllBusses,items:this.state.items,filteredBusses:this.state.filteredBusses})}):Object(s.jsx)("p",{children:"Is Loading..."})}}]),i}(n.Component),E=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,62)).then((function(e){var i=e.getCLS,s=e.getFID,n=e.getFCP,r=e.getLCP,o=e.getTTFB;i(t),s(t),n(t),r(t),o(t)}))};a.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root")),E()}},[[53,1,2]]]);
//# sourceMappingURL=main.16785f00.chunk.js.map